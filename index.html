<!DOCTYPE ahtml>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tejaswini Parlapalli | Portfolio</title>
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        /* CSS Reset */
        html, body, div, span, applet, object, iframe,
        h1, h2, h3, h4, h5, h6, p, blockquote, pre,
        a, abbr, acronym, address, big, cite, code,
        del, dfn, em, img, ins, kbd, q, s, samp,
        small, strike, strong, sub, sup, tt, var,
        b, u, i, center,
        dl, dt, dd, ol, ul, li,
        fieldset, form, label, legend,
        table, caption, tbody, tfoot, thead, tr, th, td,
        article, aside, canvas, details, embed,
        figure, figcaption, footer, header, hgroup,
        menu, nav, output, ruby, section, summary,
        time, mark, audio, video {
            margin: 0;
            padding: 0;
            border: 0;
            font-size: 100%;
            font: inherit;
            vertical-align: baseline;
        }
        *,
        *::before,
        *::after {
            box-sizing: border-box;
        }

        /* Base Body Styles */
        body {
            font-family: 'Arial', sans-serif; /* Professional font */
            background-color: #f9f9f9;
            color: #333; /* Dark font color */
            margin: 0;
            padding: 0;
            scroll-behavior: smooth;
            overflow-x: hidden; 
            transition: background-color 0.5s, color 0.5s; /* Smooth transition for background and font color change */
        }
        
        /* ------------------------------------------------ */
        /* ✨ UPDATED: Header/Light Bulb/Nav Styles (Includes light glow) ✨ */
        /* ------------------------------------------------ */
        header {
            background-color: #1a1a1a; /* Dark background for the hero section */
            color: #fff;
            text-align: left;
            padding: 20px;
            position: relative; /* CRITICAL for light effect positioning */
            height: 330px; 
            overflow: hidden; /* Ensures the radial gradient doesn't overflow the box */
        }
        
        /* --- Ambient Light Effect (Glow) --- */
        header::before {
            content: '';
            position: absolute;
            /* Anchors the light source to the top-left */
            top: -200px;
            left: -200px; 
            
            /* Large size for a soft, ambient glow */
            width: 600px; 
            height: 600px; 
            
            /* Radial Gradient: Subtle light blue glow fading to transparent */
            background: radial-gradient(
                circle at 10% 10%, 
                rgba(135, 206, 235, 0.1) 0%, /* Light blue/cyan with low opacity (10%) */
                transparent 50% /* Fades out completely */
            );
            pointer-events: none; /* Allows clicks through the pseudo-element */
            z-index: 0; /* Keeps the glow behind the content */
        }
        
        header img, header div {
            position: relative;
            z-index: 10; /* Ensures content is above the light glow */
        }

        /* --- Navigation Bar --- */
        nav {
            background-color: #1a1a1a;
            padding: 15px 20px; /* Increased padding */
            text-align: right;
            position: sticky;
            top: 0;
            z-index: 1000;
            display: flex; /* Use flexbox to position elements */
            justify-content: space-between; /* Space out the left (bulb) and right (links) */
            align-items: center;
        }

        /* --- Bulb Icon Position (Now on the Left) --- */
        .bulb-icon {
            font-size: 24px;
            cursor: pointer;
            color: #fff;
            margin: 0; /* Remove right margin */
            order: -1; /* Puts it at the start of the flex container */
            padding-right: 15px;
        }

        /* Container for the right-aligned links */
        .nav-links-container {
            display: flex;
            align-items: center;
        }

        nav a {
            color: #fff;
            text-decoration: none;
            margin: 0 10px;
            padding: 8px 12px; /* Padding for the highlight box */
            font-size: 16px;
            transition: all 0.3s;
            border-radius: 4px;
        }
        
        /* --- Navigation Highlight Effect --- */
        nav a:hover,
        nav a.active-link { 
            color: #fff;
            background-color: rgba(255, 255, 255, 0.1); /* Subtle dark highlight background */
            border-bottom: 2px solid #FF9F55; /* Orange bottom border highlight */
            transform: translateY(-2px); /* Subtle lift effect */
        }

        .resume-link {
            /* Keep existing resume link style for a button look if preferred */
            margin-left: 20px;
        }


        /* ------------------------------------------------ */
        /* --- Remaining Existing Styles (Minified) --- */
        /* ------------------------------------------------ */
        
        /* Project Section Styles */
        #Projects {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            padding: 20px;
        }

        .project-entry {
            flex: 0 0 calc(25% - 20px); 
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 10px; 
            background-color: #fff; 
            border: 1px solid #ccc;
            border-radius: 4px;
            transition: transform 0.3s ease, box-shadow 0.3s ease; 
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); 
        }

        .project-entry:hover {
            cursor: pointer;
            transform: translateY(-10px); 
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.2); 
            border-color: transparent; 
        }

        .project-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .project-description {
            margin-top: 10px;
            font-family: sans-serif;
            font-size: 14px;
            line-height: 1.6;
            letter-spacing: 0.5px;
            text-align: justify;
        }

        .project-entry .image {
            height: 100px; 
            display: flex;
            align-items: center;
            justify-content: center;
            height: 180px; 
        }

        .project-entry img {
            width: 60px; 
            height: 60px; 
            border-radius: 50%;
            object-fit: cover;
            object-position: center;
            margin-right: 10px;
            margin-bottom: 10px;
            float: left;
            display: block;
            margin-bottom: 5px;
            max-width: 30%;
            max-height: 100%;
        }

        .project-entry:hover::before {
            content: ''; 
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 24px;
            color: #ffffff;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .project-entry:hover::before {
            opacity: 10;
        }

        /* Responsive Project Entries */
        @media screen and (max-width: 1024px) {
            .project-entry {
                flex-basis: calc(50% - 20px); 
            }
        }

        @media screen and (max-width: 768px) {
            .project-entry {
                flex-basis: calc(100% - 20px); 
            }
        }


        /* Header Section */
        
        header img {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            object-fit: cover;
            object-position: center;
            margin-right: 20px;
            float: left;
        }

        header div {
            margin-left: 220px; 
        }

        header h1 {
            margin: 10px 0;
            font-size: 36px;
            font-family: 'Comic Sans MS', cursive;
            margin-bottom: 10px;
            text-transform: uppercase; 
            letter-spacing: 5px;
        }

        header p {
            margin: 0;
            font-size: 18px;
        }


        /* General Content Styles */
        .entry-details, .project-description {
            flex-grow: 1;
        }

        h2, h3, h4 {
            color: #333; 
        }

        /* Footer */
        footer {
            position: relative;
            text-align: center;
            background-color: #333;
            color: #fff;
            padding: 30px 20px; 
            width: 100%; 
            box-sizing: border-box;
        }
        
        /* New Footer Styles */
        .contact-header {
            font-size: 28px;
            margin-bottom: 20px;
            font-weight: bold;
            color: #FF9F55; 
            letter-spacing: 2px;
        }
        
        /* --- Horizontal Footer Icons --- */
        .footer-contact-icons {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 25px; 
            margin-top: 20px; 
        }

        .footer-contact-icons img {
            width: 30px;
            height: 30px;
            filter: invert(1); 
            transition: transform 0.2s ease-in-out;
        }

        .footer-contact-icons a:hover img {
            transform: scale(1.2); 
        }

        /* Fixed Sidebar Styles */
        .fixed-contact-sidebar {
            position: fixed;
            bottom: 20px; 
            left: 20px; 
            z-index: 900; 
            display: flex;
            flex-direction: column;
            gap: 10px; 
        }

        .fixed-contact-sidebar img {
            width: 30px;
            height: 30px;
            filter: invert(0.8); 
            transition: transform 0.2s;
        }

        .dark-theme .fixed-contact-sidebar img {
            filter: invert(1); 
        }

        .fixed-contact-sidebar a:hover img {
            transform: scale(1.15); 
        }


        footer a:hover {
            text-decoration: underline;
        }

        /* Dark mode */
        .dark-theme {
            background-color: #1a1a1a; 
            color: #fff; 
        }
        .dark-theme h2, .dark-theme h3, .dark-theme h4, .dark-theme h5, .dark-theme p {
            color: #fff;
        }
        .dark-theme .project-entry {
            background-color: #2c2c2c;
            border-color: #444;
        }
        .dark-theme header p, .dark-theme header h1, .dark-theme header h2 {
            color: #fff;
        }
        .dark-theme .education-details {
             background-color: rgba(44, 44, 44, 0.8);
        }
        .dark-theme .education-details h3, .dark-theme .education-details h4, .dark-theme .education-details p {
            color: #fff;
        }
        
        hr {
            margin: 1rem 0;
            border: none;
            border-top: 1px solid #ccc;
        }
        
        /* Tag Cloud Styles */
        .tag-cloud {
            display: flex;
            justify-content: center;
        }
        .cloud {
            list-style: none;
            padding-left: 0;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: center;
            line-height: 2.75rem;
            max-width: 900px;
        }
        ul.cloud a {
            --size: 4;
            --color: #817c8198;
            color: var(--color);
            font-size: calc(var(--size) * 0.2rem + 0.1rem);
            display: block;
            padding: 0.105rem 0.105rem;
            position: relative;
            text-decoration: none;
            border-bottom: none;
        }
        ul.cloud a[data-weight="1"] { --size: 1; }
        ul.cloud a[data-weight="2"] { --size: 2; }
        ul.cloud a[data-weight="3"] { --size: 3; }
        ul.cloud a[data-weight="4"] { --size: 4; }
        ul.cloud a[data-weight="5"] { --size: 6; }
        ul.cloud a[data-weight="6"] { --size: 8; }
        ul.cloud a[data-weight="7"] { --size: 10; }
        ul.cloud a[data-weight="8"] { --size: 16; }
        ul[data-show-value] a::after {
            content: " (" attr(data-weight) ")";
            font-size: 1rem;
        }
        ul.cloud li:nth-child(2n+1) a { color: #3D5A80; } 
        ul.cloud li:nth-child(3n+1) a { color: #98C1D9; } 
        ul.cloud li:nth-child(4n+1) a { color: #008185b0; } 
        ul.cloud a:focus {
            outline: 1px dashed;
        }
        ul.cloud a::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0%;
            width: 0;
            height: 0%;
            background: var(--color);
            transform: translate(-50%, 0);
            opacity: 0.15;
            transition: width 0.25s;
        }
        ul.cloud a:focus::before,
        ul.cloud a:hover::before {
            width: 100%;
        }

        /* --- Experience Timeline Styles --- */
        .experience-timeline {
            position: relative;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* The vertical "track" line */
        .experience-timeline::before {
            content: '';
            position: absolute;
            top: 25px;
            bottom: 210px;
            width: 6px;
            background-color: #ddd;
            left: 230px; 
            margin-left: -3px; 
        }

        /* Each item (job) on the timeline */
        .timeline-item {
            padding: 10px 0px 50px 280px; 
            position: relative;
        }

        /* The circle "station" on the track */
        .timeline-item::before {
            content: '';
            position: absolute;
            width: 25px;
            height: 25px;
            left: 230px;
            margin-left: -19px; 
            background-color: white;
            border: 4px solid #FF9F55;
            top: 25px; 
            border-radius: 50%;
            z-index: 1;
            transform: translateX(-50%); 
        }

        /* Container for the company logo */
        .timeline-image-container {
            position: absolute;
            left: -20px;
            top: 10px;
            width: 230px; 
            text-align: center;
        }

        /* The company logo image */
        .experience-image {
            width: 210px;
            height: 210px;
            border-radius: 15px;
            border: 3px solid #eee;
            padding: 5px;
            object-fit: contain; 
            background-color: #fff; 
        }

        /* NEW: Class for the image that spans multiple roles */
        .experience-image-spanning {
            height: 200px; 
            object-position: top; 
        }

        /* The text content for each job */
        .timeline-content {
            position: relative;
            background-color: #f9f9f9; 
        }
        .dark-theme .timeline-content {
            background-color: #1a1a1a; 
        }

        /* Styling for the text elements inside the content box */
        .timeline-content h2,
        .timeline-content h5,
        .timeline-content h6,
        .timeline-content p {
            margin: 0; 
            text-align: left;
        }

        .timeline-content h6 {
            color: #999;
            font-size: 0.9em;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }

        .timeline-content h2 {
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .timeline-content h5 {
            color: #555;
            margin-bottom: 15px;
            font-style: italic;
        }
        .dark-theme .timeline-content h5 {
            color: #ccc;
        }

        .timeline-content p {
            font-family: sans-serif;
            font-size: 14px;
            line-height: 1.6;
            letter-spacing: 0.5px;
            text-align: justify;
        }

        /* --- Responsive styles for the new timeline --- */
        @media screen and (max-width: 768px) {
            .experience-timeline::before {
                left: 30px; 
            }

            .timeline-item {
                padding-left: 70px; 
                padding-right: 15px;
            }

            .timeline-item::before {
                left: 30px; 
            }

            .timeline-image-container {
                display: none;
            }
        }
        
        /* --- Education Section --- */
        .education-entry {
            position: relative; 
            margin-bottom: 50px;
            text-align: center;
        }

        .college-image {
            position: relative; 
            width: 580px;
            height: 350px;
            left: 20%;

            margin: 0 auto 50px; 
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .education-details {
            position: absolute; 
            top: 50%; 
            left: 37%;
            transform: translate(-50%, -50%);
            background-color: rgba(255, 255, 255, 0.7); 
            padding: 20px;
            z-index: 1;
            border-radius: 10px;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            text-align: left;
            margin-top: -0px;
        }

        /* RULE to flip the text to the right side */
        .education-entry.flipped .education-details {
            left: 65%;
        }
        
        /* CORRECTED RULE to flip the image to the left side */
        .education-entry.flipped .college-image {
            left: auto;
            right: 20%;
        }

        .project-title,
        .project-description {
            color: black;
        }
        a.project-entry {
            text-decoration: none;
        }

        /* This makes sure the text turns white in dark mode */
        .dark-theme .project-title,
        .dark-theme .project-description {
            color: white;
        }

        .education-details h3,
        .education-details h4 {
            margin: 10px 0;
            color: #333;
        }
        .no-circle::before {
            display: none;
        }

        .education-details p {
            margin: 5px 0;
            color: #666;
        }

        /* ------------------------------------------------ */
        /* --- CHATBOT STYLES (New) ----------------------- */
        /* ------------------------------------------------ */

        .chat-widget-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 2000;
            user-select: none;
        }

        .chat-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: #FF9F55;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .chat-icon:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
        }

        .chat-icon i {
            font-size: 28px;
        }
        
        /* Chat Window Styles */
        .chat-window {
            width: 350px;
            height: 450px;
            border-radius: 12px;
            background: #fff;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: absolute;
            bottom: 70px; /* Position above the icon */
            right: 0;
            transition: all 0.3s ease-in-out;
            transform-origin: bottom right;
        }

        .chat-window.hidden {
            transform: scale(0);
            opacity: 0;
        }

        .chat-window * {
            font-family: 'Arial', sans-serif;
        }

        /* Header */
        .chat-header {
            background-color: #1a1a1a;
            color: #fff;
            padding: 15px;
            font-size: 16px;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-top-left-radius: 12px;
            border-top-right-radius: 12px;
        }
        
        .chat-header button {
            background: none;
            border: none;
            color: #fff;
            font-size: 18px;
            cursor: pointer;
            opacity: 0.8;
            transition: opacity 0.2s;
        }

        .chat-header button:hover {
            opacity: 1;
        }
        
        /* Body and messages */
        .chat-body {
            flex-grow: 1;
            padding: 15px;
            overflow-y: auto;
            background-color: #f0f0f0;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        /* Hide the body and input area initially using CSS `display: none;` */
        .chat-body.hidden, 
        .chat-input-area.hidden { 
            display: none; 
        }


        .message {
            max-width: 85%;
            padding: 10px 15px;
            border-radius: 15px;
            line-height: 1.4;
            font-size: 14px;
            box-shadow: 0 1px 1px rgba(0, 0, 0, 0.05);
        }

        .ai-message {
            background-color: #e0f7fa; /* Light cyan/blue */
            color: #000;
            align-self: flex-start;
            border-bottom-left-radius: 5px;
        }

        .user-message {
            background-color: #FF9F55; /* Orange accent */
            color: #fff;
            align-self: flex-end;
            border-bottom-right-radius: 5px;
        }
        
        /* Input Area */
        .chat-input-area {
            display: flex;
            padding: 10px;
            border-top: 1px solid #ddd;
        }

        .chat-input-area input {
            flex-grow: 1;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 20px;
            margin-right: 10px;
            outline: none;
        }

        .chat-input-area button {
            background-color: #FF9F55;
            color: white;
            border: none;
            border-radius: 20px;
            width: 40px;
            height: 40px;
            cursor: pointer;
            transition: background-color 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .chat-input-area button:hover {
            background-color: #e68a44;
        }

        /* --- Login/Pre-Chat Form Styles (Matching Image) --- */
        .chat-login-form {
            padding: 30px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            flex-grow: 1;
        }
        
        .chat-login-form h3 {
            font-size: 1.2rem;
            margin-bottom: 20px;
            color: #333;
        }
        
        /* Hide the login form when chat is active */
        .chat-login-form.hidden {
            display: none;
        }

        .chat-login-form input {
            width: 100%;
            padding: 12px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 8px;
            box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.05);
        }

        .chat-login-form button {
            width: 100%;
            padding: 12px;
            background-color: #1e88e5; /* A strong blue for the button */
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .chat-login-form button:hover {
            background-color: #1565c0;
        }

        /* Loading Indicator */
        .loading-dots {
            align-self: flex-start;
            display: none;
            padding: 10px 15px;
            background-color: #e0f7fa; 
            border-radius: 15px;
            border-bottom-left-radius: 5px;
            font-size: 14px;
            color: #333;
        }
        .loading-dots span {
            animation: blink 1.4s infinite;
        }
        .loading-dots span:nth-child(2) {
            animation-delay: 0.2s;
        }
        .loading-dots span:nth-child(3) {
            animation-delay: 0.4s;
        }
        @keyframes blink {
            0%, 80%, 100% { opacity: 0; }
            40% { opacity: 1; }
        }
        .loading-dots.visible {
            display: block;
        }
    </style>
</head>
<body>
    <nav>
        <i class="far fa-lightbulb bulb-icon" onclick="toggleTheme()"></i> 
        <div class="nav-links-container">
            <a href="#About">About</a>
            <a href="#Projects">Projects</a>
            <a href="#Skills">Skills</a>
            <a href="#Contact">Contact</a>
            <a href="Tejaswini.Parlapalli.Resume.pdf" class="resume-link" download><i class="fas fa-file-download"></i> Resume</a>
        </div>
    </nav>

    <header>
        <img src="images/tejaswini.jpeg" alt="Tejaswini Parlapalli" style="width: 180px; height: 180px; border-radius: 50%; object-fit: cover; object-position: center; margin-right: 20px; float: left;">
        <div style="margin-left: 220px;">
            <h1 style="font-family: 'Comic Sans MS', cursive; margin-bottom: 10px;">Tejaswini Parlapalli</h1>
            <h2 class="section-title" style="margin-bottom: 20px;">Welcome</h2>
            <p>Hello,<br> <br> </p>
            <p>I'm a data enthusiast with 6 years of experience in analytics, focused on building and deploying machine learning models. Feel free to explore my <a href="#Projects" style="color: inherit; font-size: inherit;">Projects</a> which showcase my data science and analysis work. I enjoy applying both analytical and creative thinking to transform complex data into clear, actionable insights and when I step away from the keyboard, you can usually find me with a good book, exploring the local food or singing. <br>Thanks for dropping by!</p>

            <a href="Tejaswini.Parlapalli.Resume.pdf" class="resume-link" download style="font-size: 14px; color: #fff; text-decoration: none; background-color: #494d49; padding: 12px 24px; border-radius: 25px; display: inline-block; margin-top: 20px; box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.2); transition: background-color 0.3s, transform 0.3s;">
                Download Resume
            </a>
        </div>
    </header>
    <div class="content">
        <section id="About">
            <h2 class="section-title" style="margin-bottom: 50px; text-align: left; font-size: 24px;">Experiences</h2>
        
            <div class="experience-timeline">
                
                <div class="timeline-item" style="padding-bottom: 0px; margin-bottom: 5px;">
                    <div class="timeline-image-container">
                        <img src="images/riv2.png" alt="Rivian Logo" class="experience-image experience-image-spanning">
                    </div>
                    <div class="timeline-content">
                        <h6>Apr 2023 - Present</h6>
                        <h2>Rivian</h2>
                        <h5>Sr. Data Scientist</h5>
                        <p>Implemented predictive machine learning models (Linear Regression, Random Forest, Gradient Boosting) to forecast resource shortages, reducing operational downtime by 5% and improving overall process efficiency by 12%. Optimized demand forecasting with predictive analytics (SVM, Bayesian methods, Linear Regression), achieving a 15% reduction in excess inventory. Developed Alteryx workflows delivering key KPIs to stakeholders, reducing production delays, bottlenecks and enabling faster, data-driven decisions.</p>
                    </div>
                </div>

                <div class="timeline-item no-circle">
                    <div class="timeline-content">
                    
                        <h5>Data Scientist</h5>
                        <p>Enhanced allocation of shared line-side inventory using advanced ML classification models (XGBoost, LightGBM), boosting utilization by 20% and ensuring stock distribution matching to teams’ requirements. Implemented a Reinforcement Learning (Q-Learning) system to autonomously optimize inventory and production planning – a project recognized with a Leadership Innovation Award. Streamlined data from multiple systems (SAP & MES) into cloud platforms (AWS Redshift, Snowflake, Databricks) and created executive-level Tableau dashboards, improving visibility and decision-making.</p>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-image-container">
                        <img src="images/Iu.png" alt="IU Marketing Analytics Logo" class="experience-image">
                    </div>
                    <div class="timeline-content">
                        <h6>Aug 2022 - May 2023</h6>
                        <h2>IU Marketing Analytics</h2>
                        <h5>Data Scientist</h5>
                        <p>Implemented advanced Alteryx ETL model automations to enhance API connector performance, reducing data processing time and enabling seamless integration into Big Query. This initiative saved 10 man-hours per week and streamlined workflow efficiency. Additionally, optimized pipeline development strategies within marketing funnels by leveraging Big Data tools like Hive and Spark, leading to a significant 15% reduction in data maintenance costs. Furthermore, implemented GA4 processes to track user behavior and improve marketing effectiveness. By translating these insights into Looker Studio visuals, decision-making was facilitated, resulting in a notable 2% increase in website conversions.</p>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-image-container">
                        <img src="images/iu2.png" alt="Indiana University Logo" class="experience-image">
                    </div>
                    <div class="timeline-content">
                        <h6>Aug 2021 - Apr 2022</h6>
                        <h2>Indiana University</h2>
                        <h5>Research Assistant</h5>
                        <p>Pioneering a data-driven approach, spearheaded the integration of state-of-the-art Ml & DL techniques into our research framework. This involved the development and deployment of ML and DL classification models, alongside neural network architectures, to accurately determine the age of real-world images with an precision rate of 78.3%. Additionally, leveraging NLP algorithms such as FastText, developed a failure mode prediction systems, resulting in a substantial 53% enhancement in quality metrics. Moreover, by employing NLP techniques for feature engineering, extracted valuable insights from textual data linked to images.This modified our models with crucial features, significantly improving their predictive capabilities.</p>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-image-container">
                        <img src="images/emc2.png" alt="EMC Insurance Logo" class="experience-image">
                    </div>
                    <div class="timeline-content">
                        <h6>Jun 2022 - Aug 2022</h6>
                        <h2>EMC Insurance Group</h2>
                        <h5>Data Scientist</h5>
                        <p>By implementing regression models such as Random Forest, Gradient Boost, and XGBoost, alongside meticulous feature engineering and optimization of hyperparameters on AWS and Snowflake data, I achieved an impressive 60.1% damage prediction rate. Delving into extensive research and deep analysis of large datasets, I identified crucial trends and integrated BERT, leading to a notable 10% improvement in the accuracy of insurance analysis. Moreover, through the development of interactive dashboards and visualizations using Power BI, stakeholders gained enhanced insights, aiding in the identification and rectification of faulty investments totaling $260k.</p>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-image-container">
                        <img src="images/deloitte.png" alt="Deloitte Logo" class="experience-image">
                    </div>
                    <div class="timeline-content">
                        <h6>Dec 2019 - Jul 2021</h6>
                        <h2>Deloitte</h2>
                        <h5>Business Intelligence Analyst</h5>
                        <p>Played a pivotal role in developing an Oracle Cloud RDBMS framework and implementing data analysis procedures, resulting in a seamless migration .Also by leveraging MySQL, Python, and Bash scripts, optimized data processes, ultimately reducing migration time by 3%.Utilizing statistical methods conducted data trend analysis with an impressive accuracy rate of over 85%, providing valuable insights for strategic decision-making.</p>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-image-container">
                        <img src="images/amazon2.jpeg" alt="Amazon Logo" class="experience-image">
                    </div>
                    <div class="timeline-content">
                        <h6>Dec 2019 - Dec 2019</h6>
                        <h2>Amazon</h2>
                        <h5>Data Scientist</h5>
                        <p>Played a pivotal role in developing an Oracle Cloud RDBMS framework and implementing data analysis procedures, resulting in a seamless migration .Also by leveraging MySQL, Python, and Bash scripts, optimized data processes, ultimately reducing migration time by 3%.Utilizing statistical methods conducted data trend analysis with an impressive accuracy rate of over 85%, providing valuable insights for strategic decision-making.</p>
                    </div>
                </div>
            </div>
        </section>


        <br>
        <br>

        <section id="Projects">
            <h2 class="section-title" style="margin-bottom: 10px; text-align: left; font-size: 24px; letter-spacing: 3px; width:100%;">Things I've Built</h2>
            <div class="project-entry">
                <a href="https://github.com/Tejaswini283/Age-Gender-Detection-system/blob/main/Deep_learning_project.ipynb" class="project-entry">
                    <span class="image main"><img src="images/age.jpeg" alt="" /></span>
                    <p class="project-title">Age Gender detection system using CNN and RNN deep learning techniques</p>
                    <p class="project-description">The Age, Gender, and Ethnicity Detection System is a deep learning framework designed to classify age, gender, and ethnicity from facial images. Utilizing CNN and RNN models, this system aims to provide accurate and reliable results for applications in airports, police stations, and personalized recommendation systems.</p>
                </a>
            </div>
            <div class="project-entry">
                <a href="https://github.com/Tejaswini283/Airport-Satisfaction-analysis-project/tree/main" class="project-entry">
                    <span class="image main"><img src="images/air.jpeg" alt="" /></span>
                    <p class="project-title">Analysis of Airline Passenger satisfaction</p>
                    <p class="project-description">The goal is to identify key factors contributing to passenger satisfaction. Using R Studio, machine learning algorithms, and data visualizations, the analysis highlights the impact of inflight entertainment, ease of online booking, and travel type. Linear Discriminant Analysis (LDA) and Quadratic Discriminant Analysis (QDA) were the most accurate models.</p>
                </a>
            </div>
            <div class="project-entry">
                <a href="https://github.com/Tejaswini283/Zonal-Accident-Prediction-system/blob/main/Zonal_Accident_Risk_Analysis%20(1).ipynb" class="project-entry">
                    <span class="image main"><img src="images/zonal.jpeg" alt="" /></span>
                    <p class="project-title">Zonal Accident Risk Prediction system</p>
                    <p class="project-description">The Zonal Accident Risk Prediction project analyzed road accident data to identify patterns and contributing factors. Using linear regression and random forest models, the project predicted factors like speed limits and fatalities to recommend safety measures. Limitations included missing predictors for road surface and weather conditions.</p>
                </a>
            </div>
            <div class="project-entry">
                <a href="https://github.com/Tejaswini283/IU-Commuter-pass" class="project-entry">
                    <span class="image main"><img src="images/iu.jpeg" alt="" /></span>
                    <p class="project-title">IU Commuter Pass</p>
                    <p class="project-description">The IUCommuterPass (IUCP) web app connects IUPUI students for carpooling, reducing transportation costs and environmental impact. Features include trip cost calculation, check-in, and messaging. The project promotes affordable transportation, reduces pollution and traffic congestion, and fosters social connections among students.</p>
                </a>
            </div>
            <div class="project-entry">
                <a href="https://github.com/Tejaswini283/John_snow_visualization_project" class="project-entry">
                    <span class="image main"><img src="images/john.jpeg" alt="" /></span>
                    <p class="project-title">John snows cholera map visualization using D3.js</p>
                    <p class="project-description">Dr. John Snow's map visualized the 1854 cholera epidemic in London, revealing patterns and mitigating effects. Interactive elements included a timeline chart, map, and pie charts showing death variations by age and gender. Key findings highlighted higher death rates among the elderly and children, with contaminated water pumps as hotspots.</p>
                </a>
            </div>
            <div class="project-entry">
                <a href="https://github.com/Tejaswini283/John_snow_visualization_project" class="project-entry">
                    <span class="image main"><img src="images/john.jpeg" alt="" /></span>
                    <p class="project-title">ML Project</p>
                    <p class="project-description">Dr. John Snow's map visualized the 1854 cholera epidemic in London, revealing patterns and mitigating effects. Interactive elements included a timeline chart, map, and pie charts showing death variations by age and gender. Key findings highlighted higher death rates among the elderly and children, with contaminated water pumps as hotspots.</p>
                </a>
            </div>
            <div class="project-entry">
                <a href="https://github.com/Tejaswini283/John_snow_visualization_project" class="project-entry">
                    <span class="image main"><img src="images/john.jpeg" alt="" /></span>
                    <p class="project-title">DS Project</p>
                    <p class="project-description">Dr. John Snow's map visualized the 1854 cholera epidemic in London, revealing patterns and mitigating effects. Interactive elements included a timeline chart, map, and pie charts showing death variations by age and gender. Key findings highlighted higher death rates among the elderly and children, with contaminated water pumps as hotspots.</p>
                </a>
            </div>
        </section>

        <br>
        <br>
        
        <section id="Education">
            <h2 class="section-title" style="margin-bottom: 10px; text-align: left; font-size: 24px;">Education</h2>
            <div class="education-entry">
                <img src="images/iupui.png" alt="College" loading="lazy" class="college-image">
                <div class="education-details">
                    <h3 style="letter-spacing: 0.9px;">Indiana University Purdue University Indianapolis</h3>
                    <h4>Masters, Applied Data Science </h4>
                    <p style="color: #FF9F55;">GPA 3.8</p>
                    <p><strong style="color: rgba(43, 41, 41, 0.829);">Courses:</strong> Database Management, Programming - Data Science, Cloud computing, Web Database development, Data Analytics with R, Machine Learning, Deep Learning & AI, Statistical Learning and Data visualization.</p>
                </div>
            </div>
            <div class="education-entry flipped">
                <img src="images/gnits.jpg" alt="College" class="college-image">
                <div class="education-details">
                    <h3 style="letter-spacing: 0.9px;">Jawaharlal Nehru Technological University</h3>
                    <h4>Bachelors, Electronics Engineering </h4>
                    <p style="color: #FF9F55;">GPA 4.0</p>
                    <p><strong style="color: rgba(43, 41, 41, 0.829);">Courses:</strong> C, Java ,Matlab, Python, Database management,Data processing at scale, Advanced computer networks,Operating systems </p>
                </div>
            </div>
        </section>


        <section id="Skills" >
            <h2 class="section-title" style="margin-bottom: 60px; text-align: left; font-size: 24px;">Skills</h2>
            <div class="skills-container">
            
                <div class="tag-cloud">
                    <ul class="cloud" role="navigation" aria-label="Webdev word cloud">
            
                        <li><a href="https://en.wikipedia.org/wiki/Python" data-weight="8">Python</a></li>
                        <li><a href="https://en.wikipedia.org/wiki/D3.js" data-weight="2">D3.js</a></li>
                        <li><a href="https://en.wikipedia.org/wiki/R_(programming_language)" data-weight="7">R</a></li>
                        <li><a href="https://en.wikipedia.org/wiki/Predictive_modelling" data-weight="4">Predictive Modeling</a></li>
                        <li><a href="https://en.wikipedia.org/wiki/Amazon_Web_Services" data-weight="6">AWS</a></li>
                        <li><a href="https://en.wikipedia.org/wiki/Cascading_Style_Sheets" data-weight="1">CSS</a></li>
                        <li><a href="https://en.wikipedia.org/wiki/Statistics" data-weight="4">Statistics</a></li>
                        <li><a href="https://en.wikipedia.org/wiki/SQL" data-weight="8">SQL</a></li>
                        <li><a href="https://en.wikipedia.org/wiki/Tableau_Software" data-weight="5">Tableau</a></li>
                        <li><a href="https://en.wikipedia.org/wiki/Power_BI" data-weight="4">Power BI</a></li>
                        <li><a href="https://en.wikipedia.org/wiki/Data_science" data-weight="8">Data Science</a></li>
                        <li><a href="https://en.wikipedia.org/wiki/Big_data" data-weight="3">Big Data</a></li>
                        <li><a href="https://en.wikipedia.org/wiki/HTML" data-weight="7">HTML</a></li>
                        <li><a href="https://en.wikipedia.org/wiki/Data_mining" data-weight="5">Data Mining</a></li>
                        <li><a href="https://en.wikipedia.org/wiki/Exploratory_data_analysis" data-weight="3">Exploratory Data Analysis</a></li>
                        <li><a href="https://en.wikipedia.org/wiki/Google_Analytics" data-weight="5">Google Analytics</a></li>
                        <li><a href="https://en.wikipedia.org/wiki/Natural_language_processing" data-weight="6">Natural Language Processing</a></li>
                        <li><a href="https://en.wikipedia.org/wiki/Google_Cloud_Platform" data-weight="8">GCP</a></li>
                        <li><a href="https://en.wikipedia.org/wiki/Machine_learning" data-weight="8">Machine Learning</a></li>
                        <li><a href="https://en.wikipedia.org/wiki/Machine_learning" data-weight="5">Computer Vision</a></li>
                        <li><a href="https://en.wikipedia.org/wiki/Git" data-weight="2">Git</a></li>
                        <li><a href="https://en.wikipedia.org/wiki/Apache_Hive" data-weight="4">Hive</a></li>
                        
                        <li><a href="https://en.wikipedia.org/wiki/Adobe_Analytics" data-weight="6">Adobe Analytics</a></li>
                        <li><a href="https://en.wikipedia.org/wiki/Databricks" data-weight="3">Databricks</a></li>
                        <li><a href="https://en.wikipedia.org/wiki/Datorama" data-weight="5">Datorama</a></li>
                        <li><a href="https://en.wikipedia.org/wiki/Apache_Spark" data-weight="8">Spark</a></li>
                        <li><a href="https://en.wikipedia.org/wiki/Snowflake_(data_company)" data-weight="7">Snowflake</a></li>
                        <li><a href="https://en.wikipedia.org/wiki/Alteryx" data-weight="6">Alteryx</a></li>
                        <li><a href="https://en.wikipedia.org/wiki/Google_BigQuery" data-weight="5">Big Query</a></li>
                        
                    </ul>
                </div>
            </div>
        </section>
<br>
<br>
        <footer id="Contact">
            <h2 class="contact-header">Get In Touch</h2>
            
            <div class="footer-contact-icons">
                <a href="https://mail.google.com/mail/?view=cm&fs=1&to=parlapallitejaswini283@gmail.com" target="_blank">
                    <img src="https://img.icons8.com/ios-glyphs/30/000000/gmail.png" alt="Gmail">
                </a>
                <a href="https://github.com/Tejaswini283" target="_blank">
                    <img src="https://img.icons8.com/ios-glyphs/30/000000/github.png" alt="GitHub">
                </a>
                <a href="https://www.linkedin.com/in/tejaswini-parlapalli/" target="_blank">
                    <img src="https://img.icons8.com/ios-glyphs/30/000000/linkedin.png" alt="LinkedIn">
                </a>
                <a href="https://leetcode.com/u/Tejaswini_283/" target="_blank">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/1/19/LeetCode_logo_black.png" alt="Leetcode">
                </a>
            </div>
            <hr style="border-top: 1px solid rgba(255, 255, 255, 0.2); width: 20%; margin: 20px auto;">

            <p style="font-size: 0.9rem;">
                Designed and built by <a href="https://github.com/Tejaswini283/Tejaswini283.github.io/blob/main/index.html" target="_blank" style="color: #FF9F55; text-decoration: none;">Tejaswini Parlapalli</a>.
            </p>
        </footer>

        <div class="fixed-contact-sidebar">
            <a href="https://mail.google.com/mail/?view=cm&fs=1&to=parlapallitejaswini283@gmail.com" target="_blank">
                <img src="https://img.icons8.com/ios-glyphs/30/000000/gmail.png" alt="Gmail">
            </a>
            <a href="https://github.com/Tejaswini283" target="_blank">
                <img src="https://img.icons8.com/ios-glyphs/30/000000/github.png" alt="GitHub">
            </a>
            <a href="https://www.linkedin.com/in/tejaswini-parlapalli/" target="_blank">
                <img src="https://img.icons8.com/ios-glyphs/30/000000/linkedin.png" alt="LinkedIn">
            </a>
            <a href="https://leetcode.com/u/Tejaswini_283/" target="_blank">
                <img src="https://upload.wikimedia.org/wikipedia/commons/1/19/LeetCode_logo_black.png" alt="Leetcode" style="width: 30px; height: 30px;">
            </a>
        </div>
        
        <script src="https://kit.fontawesome.com/a076d05399.js"></script> <script>
            // Function to toggle light/dark theme
            function toggleTheme() {
                document.body.classList.toggle("dark-theme");
            }
        </script>
    </div>
    
    <!-- ------------------------------------------------------------------ -->
    <!-- CHATBOT IMPLEMENTATION (HTML & JavaScript) -->
    <!-- ------------------------------------------------------------------ -->

    <div class="chat-widget-container">
        <!-- Chat Icon (The button the user clicks) -->
        <div class="chat-icon" id="chat-icon-toggle">
            <i class="fas fa-robot"></i>
        </div>
        
        <!-- Chat Window -->
        <div class="chat-window hidden" id="chat-window">
            
            <!-- Chat Header -->
            <div class="chat-header">
                Conversation with Portfolio Bot
                <button onclick="toggleChatWindow(false)"><i class="fas fa-times"></i></button>
            </div>

            <!-- Login Screen -->
            <div class="chat-login-form" id="chat-login-form">
                <h3 style="color: #1a1a1a;">Welcome!</h3>
                <input type="text" id="user-name" placeholder="What's your name?" style="text-align: center;" required>
                <input type="email" id="user-email" placeholder="you@example.com" style="text-align: center;" required>
                <button onclick="startChat()">Start Chat</button>
            </div>
            
            <!-- Chat Conversation Area -->
            <div class="chat-body hidden" id="chat-body">
                <!-- Messages go here -->
                <div class="loading-dots" id="loading-dots">
                    <span>.</span><span>.</span><span>.</span>
                </div>
            </div>

            <!-- Chat Input -->
            <div class="chat-input-area hidden" id="chat-input-area">
                <input type="text" id="user-input" placeholder="Write your message here" onkeydown="handleInputKey(event)">
                <button onclick="sendMessage()"><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>
    </div>

    <script>
        // Store portfolio content globally
        const portfolioContent = `
            Hi! I'm Tejaswini Parlapalli, a data enthusiast with 6 years of experience in analytics, focused on building and deploying machine learning models. 
            
            Experience:
            - Apr 2023 - Present: Sr. Data Scientist at Rivian. Key achievements include implementing predictive ML models (Linear Regression, Random Forest, Gradient Boosting) to forecast resource shortages, optimizing demand forecasting (SVM, Bayesian methods), and enhancing inventory allocation using ML classification (XGBoost, LightGBM). I also implemented a Reinforcement Learning (Q-Learning) system.
            - Aug 2022 - May 2023: Data Scientist at IU Marketing Analytics. Enhanced API connector performance with Alteryx ETL, optimized pipeline development with Hive and Spark, and implemented GA4 processes for improved marketing effectiveness.
            - Aug 2021 - Apr 2022: Research Assistant at Indiana University. Pioneered ML & DL techniques for age determination from images (78.3% precision) and failure mode prediction using NLP (FastText), enhancing quality metrics by 53%.
            - Jun 2022 - Aug 2022: Data Scientist at EMC Insurance Group. Achieved 60.1% damage prediction rate using regression models (Random Forest, Gradient Boost, XGBoost) and integrated BERT for 10% improvement in analysis accuracy.
            - Dec 2019 - Jul 2021: Business Intelligence Analyst at Deloitte. Developed Oracle Cloud RDBMS framework, optimized data processes with MySQL, Python, and Bash, and conducted trend analysis with >85% accuracy.
            - Dec 2019 - Dec 2019: Data Scientist at Amazon (Role similar to Deloitte, focus on Oracle Cloud RDBMS, MySQL, Python).

            Skills:
            - Languages: Python, R, SQL, HTML, CSS
            - ML/Data Science: Predictive Modeling, Data Science, Data Mining, Exploratory Data Analysis, Natural Language Processing (NLP), Computer Vision, Machine Learning, Deep Learning & AI, Statistics.
            - Tools/Platforms: AWS, GCP, Tableau, Power BI, Google Analytics, Adobe Analytics, Git, Hive, Databricks, Datorama, Spark, Snowflake, Alteryx, Big Query.
            
            Projects:
            - Age Gender detection system (CNN and RNN deep learning)
            - Analysis of Airline Passenger satisfaction (R Studio, LDA, QDA)
            - Zonal Accident Risk Prediction system (linear regression, random forest)
            - IU Commuter Pass (web app for carpooling)
            - John snows cholera map visualization (D3.js)
        `;
        
        let chatHistory = [];
        let userName = '';
        let userEmail = '';
        let isChatActive = false;
        
        const chatWindow = document.getElementById('chat-window');
        const chatIcon = document.getElementById('chat-icon-toggle');
        const chatBody = document.getElementById('chat-body');
        const chatInputArea = document.getElementById('chat-input-area');
        const chatLoginForm = document.getElementById('chat-login-form');
        const userInput = document.getElementById('user-input');
        const loadingDots = document.getElementById('loading-dots');
        
        // --- API Setup ---
        // CRITICAL FIX: Define the model API URL without the key, as the environment injects it automatically.
        const MODEL_NAME = "gemini-2.5-flash-preview-05-20";
        // NOTE: Keeping the API_URL simple here as per Canvas guidelines for runtime injection
        const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/${MODEL_NAME}:generateContent`;
        
        // --- Utility Functions ---

        /** Toggles the chat window open/closed */
        function toggleChatWindow(show) {
            if (show !== undefined) {
                chatWindow.classList.toggle('hidden', !show);
            } else {
                chatWindow.classList.toggle('hidden');
            }
        }
        
        /** Appends a message to the chat body */
        function appendMessage(text, sender) {
            const messageElement = document.createElement('div');
            messageElement.classList.add('message');
            messageElement.classList.add(sender === 'user' ? 'user-message' : 'ai-message');
            
            // Basic markdown-like formatting (bolding)
            const formattedText = text
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                .replace(/\*(.*?)\*/g, '<em>$1</em>');

            messageElement.innerHTML = formattedText;
            chatBody.appendChild(messageElement);
            chatBody.scrollTop = chatBody.scrollHeight; // Scroll to bottom
        }

        /** Handles starting the chat after name/email input */
        function startChat() {
            userName = document.getElementById('user-name').value.trim();
            userEmail = document.getElementById('user-email').value.trim();

            if (!userName || !userEmail) {
                // Use custom method instead of alert
                alert('Please enter your name and email to start the chat.');
                return;
            }
            
            // FIX: Hide login form explicitly
            chatLoginForm.style.display = 'none'; 
            
            // Show chat interface
            chatBody.classList.remove('hidden');
            chatInputArea.classList.remove('hidden');
            isChatActive = true;
            
            // Initial greeting from the bot (simulating 3rd image)
            const initialBotMessage = `Hey ${userName}! Thanks for sharing your email — ${userEmail}.
I'm Botfolio, here to help with Tejaswini Parlapalli's portfolio — ask me anything!`;
            
            appendMessage(initialBotMessage, 'ai');
            
            // Initialize chat history with system instructions
            const systemInstruction = `You are a helpful and engaging AI assistant named Botfolio, dedicated to answering questions about Tejaswini Parlapalli's portfolio and professional background.
Your name is Botfolio. You must answer questions based ONLY on the following context about Tejaswini: 

${portfolioContent}

Maintain a friendly, professional, and knowledgeable tone. If you are asked something outside the context, politely state that your knowledge is limited to Tejaswini's portfolio.`;
            
            // Add initial exchange to history
            chatHistory.push({ role: "user", parts: [{ text: "Hello! Please summarize your role and knowledge base." }] });
            chatHistory.push({ role: "model", parts: [{ text: initialBotMessage }] });
        }
        
        /** Handles sending user message and fetching AI response */
        async function sendMessage() {
            const userMessage = userInput.value.trim();
            if (!userMessage || !isChatActive) return;

            // 1. Display user message
            appendMessage(userMessage, 'user');
            userInput.value = '';

            // 2. Show loading dots
            loadingDots.classList.add('visible');
            chatBody.scrollTop = chatBody.scrollHeight;

            // 3. Add user message to history
            chatHistory.push({ role: "user", parts: [{ text: userMessage }] });

            // 4. API Call Logic (with retry)
            const maxRetries = 3;
            let responseText = "Sorry, I'm having trouble connecting right now. Please try again in a moment.";

            for (let i = 0; i < maxRetries; i++) {
                try {
                    const payload = {
                        contents: chatHistory,
                        systemInstruction: {
                            parts: [{ text: `You are a friendly, professional AI assistant named Botfolio for Tejaswini Parlapalli's portfolio. Answer questions ONLY using the following context: ${portfolioContent}` }]
                        },
                    };
                    
                    // CRITICAL FIX: Pass the body separately and use a simple fetch call.
                    // Removed the API key from the URL and rely on the environment's authorization.
                    const response = await fetch(API_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        // Check for detailed error if available
                        const errorDetails = await response.text();
                        console.error(`API Error Response (Attempt ${i + 1}):`, response.status, errorDetails);
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    
                    const result = await response.json();
                    const candidate = result.candidates?.[0];

                    if (candidate && candidate.content?.parts?.[0]?.text) {
                        responseText = candidate.content.parts[0].text;
                        break; // Success, break out of loop
                    } else {
                         // Check for blocked content (safety filter)
                        if (result.promptFeedback && result.promptFeedback.blockReason) {
                            responseText = "I apologize, but I cannot respond to that query due to safety filtering policy.";
                            console.warn("API Call Blocked:", result.promptFeedback.blockReason);
                            break;
                        }
                        throw new Error("Invalid response structure from API or content missing.");
                    }

                } catch (error) {
                    console.error(`Attempt ${i + 1} failed, retrying...`, error);
                    if (i < maxRetries - 1) {
                        await new Promise(resolve => setTimeout(resolve, Math.pow(2, i) * 1000)); // Exponential backoff
                    }
                }
            }

            // 5. Hide loading dots
            loadingDots.classList.remove('visible');

            // 6. Display AI message and update history
            appendMessage(responseText, 'ai');
            
            // Only push successful AI response to history to maintain context integrity
            if (responseText !== "Sorry, I'm having trouble connecting right now. Please try again in a moment.") {
                 chatHistory.push({ role: "model", parts: [{ text: responseText }] });
            }
        }
        
        /** Handles the Enter key press in the input field */
        function handleInputKey(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // --- Event Listeners ---
        
        // Show/hide chat window when icon is clicked
        chatIcon.addEventListener('click', () => {
            toggleChatWindow();
        });

        // Use custom message instead of alert
        function alert(message) {
            const chatHeader = document.querySelector('.chat-header');
            const alertBox = document.createElement('div');
            alertBox.style.cssText = 'position: absolute; top: 0; left: 0; width: 100%; padding: 10px; background-color: #f44336; color: white; text-align: center; border-radius: 12px 12px 0 0; z-index: 10; font-size: 14px;';
            alertBox.textContent = message;
            chatWindow.prepend(alertBox);
            setTimeout(() => {
                alertBox.remove();
            }, 3000);
        }
        
    </script>
</body>
</html>
